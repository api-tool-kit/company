{"collection":{"info":{"_postman_id":"e8b3b37c-13ab-4eb9-9070-466bd8552699","name":"BigCo Company API","description":"Test set for Big Co's Company service.","schema":"https://schema.getpostman.com/json/collection/v2.1.0/collection.json"},"item":[{"name":"Company Home","event":[{"listen":"test","script":{"id":"dcf54267-9178-4778-81b8-37a551c0a4ea","exec":["/***********************"," * FORMS+JSON TESTS"," ***********************/","","// shared vars for this script ","var body = pm.response.json();","var utils = eval(globals.loadUtils);","utils.setObject({object:'home'});","","// 200 OK","utils.checkStatus(200);","","// HEADERS","utils.checkHeader({name:'content-type',value:'application/forms+json'});","","// METADATA","utils.checkMetaProperty({name:'title', value:'BigCo Company Records'});","utils.checkMetaProperty({name:'release', value:'1.0.0'});","utils.checkMetaProperty({name:'author', value:'Amundsen'});","","// LINKS","utils.checkPageLink({name:'home', has:['id','href','rel']});","utils.checkPageLinkProperty({name:'home', property:'id', value:'home'});","utils.checkPageLink({name:'self', has:['id','href','rel']});","utils.checkPageLink({name:'list', has:['id','href','rel']});","","// EOF",""],"type":"text/javascript"}},{"listen":"prerequest","script":{"id":"7572a31c-6076-4348-8443-92430dabd415","exec":[""],"type":"text/javascript"}}],"_postman_id":"22fec7ca-62db-4fa1-b3b5-0597b2cc07db","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"GET","header":[{"key":"Accept","type":"text","value":"application/forms+json"}],"url":{"raw":"{{server}}/","host":["{{server}}"],"path":[""]}},"response":[]},{"name":"Company List","event":[{"listen":"test","script":{"id":"aa707d9f-93f6-437a-8715-45e6dec84ea3","exec":["/***********************"," * FORMS+JSON TESTS"," ***********************/","","// shared vars for this script ","var body = pm.response.json();","var utils = eval(globals.loadUtils);","utils.setObject({object:'company'});","","// 200 OK","utils.checkStatus(200);","","// HEADERS","utils.checkHeader({name:'content-type',value:'application/forms+json'});","","// METADATA","utils.checkMetaProperty({name:'title', value:'BigCo Company Records'});","utils.checkMetaProperty({name:'release', value:'1.0.0'});","utils.checkMetaProperty({name:'author', value:'Amundsen'});","","// LINKS","utils.checkPageLink({name:'home', has:['id','href','rel']});","utils.checkPageLink({name:'self', has:['id','href','rel']});","utils.checkPageLink({name:'list', has:['id','href','rel']});","utils.checkPageLink({name:'filter', has:['id','href','rel']});","utils.checkPageLink({name:'create', has:['id','href','rel','method','properties']});","","// ITEMS","utils.checkItem({has:['id','companyName','status','email','dateCreated','dateUpdated','links']});","utils.checkItemLink({name:'read', has:['id','href','rel']});","utils.checkItemLink({name:'update', has:['id','href','rel','method','properties']});","utils.checkItemLink({name:'status', has:['id','href','rel','method','properties']});","utils.checkItemLink({name:'remove', has:['id','href','rel','method','properties']});","","// EOF",""],"type":"text/javascript"}},{"listen":"prerequest","script":{"id":"0bf85a62-3593-4514-bab9-ca0015971f4e","exec":[""],"type":"text/javascript"}}],"_postman_id":"23cf0775-b0ee-422d-83e1-bfe72bbb3859","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"GET","header":[{"key":"Accept","type":"text","value":"application/forms+json"}],"url":{"raw":"{{server}}/list/","host":["{{server}}"],"path":["list",""]}},"response":[]},{"name":"Company Remove","event":[{"listen":"test","script":{"id":"aa707d9f-93f6-437a-8715-45e6dec84ea3","exec":["/***********************"," * FORMS+JSON TESTS"," ***********************/","","// shared vars for this script ","var body = pm.response.json();","var utils = eval(globals.loadUtils);","utils.setObject({object:'company'});","","// 200 OK","utils.checkStatus(200);","","// HEADERS","utils.checkHeader({name:'content-type',value:'application/forms+json'});","","// METADATA","utils.checkMetaProperty({name:'title', value:'BigCo Company Records'});","utils.checkMetaProperty({name:'release', value:'1.0.0'});","utils.checkMetaProperty({name:'author', value:'Amundsen'});","","// LINKS","utils.checkPageLink({name:'home', has:['id','href','rel']});","utils.checkPageLink({name:'self', has:['id','href','rel']});","utils.checkPageLink({name:'list', has:['id','href','rel']});","utils.checkPageLink({name:'filter', has:['id','href','rel']});","","// ITEMS","utils.checkItem({has:['id','companyName','status','email','dateCreated','dateUpdated','links']});","utils.checkItemLink({name:'read', has:['id','href','rel']});","utils.checkItemLink({name:'update', has:['id','href','rel','method','properties']});","utils.checkItemLink({name:'status', has:['id','href','rel','method','properties']});","utils.checkItemLink({name:'remove', has:['id','href','rel','method','properties']});","","// EOF"],"type":"text/javascript"}},{"listen":"prerequest","script":{"id":"0bf85a62-3593-4514-bab9-ca0015971f4e","exec":["// generate values for tests","pm.environment.set('testId', makeId());","pm.environment.set('companyName', 'mike-co');","pm.environment.set('email', 'mike-co@gmail.com');","pm.environment.set('telephone', '123-456-7890');","pm.environment.set('status','pending');","pm.environment.set('streetAddress', '123 Main St');","pm.environment.set('city', 'Byteville');","pm.environment.set('stateProvince','MD');","pm.environment.set('country', 'USA');","pm.environment.set('postalCode','12345');","","// generate a unique id ","function makeId() {","  var rtn;","","  rtn = String(Math.random());","  rtn = rtn.substring(2);","  rtn = parseInt(rtn).toString(36);","","  return rtn;","}","",""],"type":"text/javascript"}}],"_postman_id":"91c98029-18e4-4658-ae7c-c8b861e835c6","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"DELETE","header":[{"key":"Accept","type":"text","value":"application/forms+json"},{"key":"Content-Type","name":"Content-Type","type":"text","value":"application/x-www-form-urlencoded"}],"body":{"mode":"urlencoded","urlencoded":[]},"url":{"raw":"{{server}}/{{testId}}","host":["{{server}}"],"path":["{{testId}}"]}},"response":[]},{"name":"Company Create","event":[{"listen":"test","script":{"id":"aa707d9f-93f6-437a-8715-45e6dec84ea3","exec":["/***********************"," * FORMS+JSON TESTS"," ***********************/","","// shared vars for this script ","var body = pm.response.json();","var utils = eval(globals.loadUtils);","utils.setObject({object:'company'});","","// 200 OK","utils.checkStatus(200);","","// HEADERS","utils.checkHeader({name:'content-type',value:'application/forms+json'});","","// METADATA","utils.checkMetaProperty({name:'title', value:'BigCo Company Records'});","utils.checkMetaProperty({name:'release', value:'1.0.0'});","utils.checkMetaProperty({name:'author', value:'Amundsen'});","","// LINKS","utils.checkPageLink({name:'home', has:['id','href','rel']});","utils.checkPageLink({name:'self', has:['id','href','rel']});","utils.checkPageLink({name:'list', has:['id','href','rel']});","utils.checkPageLink({name:'filter', has:['id','href','rel']});","utils.checkPageLink({name:'create', has:['id','href','rel','method','properties']});","","// ITEMS","utils.checkItem({has:['id','companyName','status','email','dateCreated','dateUpdated','links']});","utils.checkItemLink({name:'read', has:['id','href','rel']});","utils.checkItemLink({name:'update', has:['id','href','rel','method','properties']});","utils.checkItemLink({name:'status', has:['id','href','rel','method','properties']});","utils.checkItemLink({name:'remove', has:['id','href','rel','method','properties']});","","","// EOF",""],"type":"text/javascript"}},{"listen":"prerequest","script":{"id":"0bf85a62-3593-4514-bab9-ca0015971f4e","exec":[""],"type":"text/javascript"}}],"_postman_id":"55fae24c-d18d-459e-8225-9ffb7bb7737a","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"POST","header":[{"key":"Accept","type":"text","value":"application/forms+json"},{"key":"Content-Type","name":"Content-Type","value":"application/x-www-form-urlencoded","type":"text"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"id","type":"text","value":"{{testId}}"},{"key":"companyName","type":"text","value":"{{companyName}}"},{"key":"email","type":"text","value":"{{email}}"},{"key":"telephone","type":"text","value":"{{telephone}}"},{"key":"status","type":"text","value":"{{status}}"}]},"url":{"raw":"{{server}}/","host":["{{server}}"],"path":[""]}},"response":[]},{"name":"Company Read","event":[{"listen":"test","script":{"id":"aa707d9f-93f6-437a-8715-45e6dec84ea3","exec":["/***********************"," * FORMS+JSON TESTS"," ***********************/","","// shared vars for this script ","var body = pm.response.json();","var utils = eval(globals.loadUtils);","utils.setObject({object:'company'});","","// 200 OK","utils.checkStatus(200);","","// HEADERS","utils.checkHeader({name:'content-type',value:'application/forms+json'});","","// METADATA","utils.checkMetaProperty({name:'title', value:'BigCo Company Records'});","utils.checkMetaProperty({name:'release', value:'1.0.0'});","utils.checkMetaProperty({name:'author', value:'Amundsen'});","","// LINKS","utils.checkPageLink({name:'home', has:['id','href','rel']});","utils.checkPageLink({name:'self', has:['id','href','rel']});","utils.checkPageLink({name:'list', has:['id','href','rel']});","utils.checkPageLink({name:'filter', has:['id','href','rel']});","","// ITEMS","utils.checkItem({has:['id','companyName','status','email','dateCreated','dateUpdated','links']});","utils.checkItemLink({name:'read', has:['id','href','rel']});","utils.checkItemLink({name:'update', has:['id','href','rel','method','properties']});","utils.checkItemLink({name:'status', has:['id','href','rel','method','properties']});","utils.checkItemLink({name:'remove', has:['id','href','rel','method','properties']});","","// ITEM PROPERTIES","var testId = pm.environment.get('testId');","var companyName = pm.environment.get('companyName');","var streetAddress = pm.environment.get('streetAddress');","var city = pm.environment.get('city');","var country = pm.environment.get('country');","var postalCode = pm.environment.get('postalCode');","var telephone = pm.environment.get('telephone');","var email = pm.environment.get('email');","","utils.checkItemProperty({id:testId,property:'companyName',value:companyName});","utils.checkItemProperty({id:testId,property:'email', value:email});","utils.checkItemProperty({id:testId, property:'telephone', value:telephone});","utils.checkItemProperty({id:testId,property:'status',value:'pending'});","","// EOF",""],"type":"text/javascript"}},{"listen":"prerequest","script":{"id":"0bf85a62-3593-4514-bab9-ca0015971f4e","exec":[""],"type":"text/javascript"}}],"_postman_id":"ae2f21e8-e8c3-4bc3-8c44-129930a4207c","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"GET","header":[{"key":"Accept","type":"text","value":"application/forms+json"}],"url":{"raw":"{{server}}/{{testId}}","host":["{{server}}"],"path":["{{testId}}"]}},"response":[]},{"name":"Company Update","event":[{"listen":"test","script":{"id":"aa707d9f-93f6-437a-8715-45e6dec84ea3","exec":["/***********************"," * FORMS+JSON TESTS"," ***********************/","","// shared vars for this script ","var body = pm.response.json();","var utils = eval(globals.loadUtils);","utils.setObject({object:'company'});","","// 200 OK","utils.checkStatus(200);","","// HEADERS","utils.checkHeader({name:'content-type',value:'application/forms+json'});","","// METADATA","utils.checkMetaProperty({name:'title', value:'BigCo Company Records'});","utils.checkMetaProperty({name:'release', value:'1.0.0'});","utils.checkMetaProperty({name:'author', value:'Amundsen'});","","// LINKS","utils.checkPageLink({name:'home', has:['id','href','rel']});","utils.checkPageLink({name:'self', has:['id','href','rel']});","utils.checkPageLink({name:'list', has:['id','href','rel']});","utils.checkPageLink({name:'filter', has:['id','href','rel']});","","// ITEMS","utils.checkItem({has:['id','companyName','status','email','dateCreated','dateUpdated','links']});","utils.checkItemLink({name:'read', has:['id','href','rel']});","utils.checkItemLink({name:'update', has:['id','href','rel','method','properties']});","utils.checkItemLink({name:'status', has:['id','href','rel','method','properties']});","utils.checkItemLink({name:'remove', has:['id','href','rel','method','properties']});","","// ITEM PROPERTIES","var testId = pm.environment.get('testId');","var companyName = pm.environment.get('companyName');","var streetAddress = pm.environment.get('streetAddress');","var city = pm.environment.get('city');","var country = pm.environment.get('country');","var postalCode = pm.environment.get('postalCode');","var telephone = pm.environment.get('telephone');","var email = pm.environment.get('email');","","utils.checkItemProperty({id:testId,property:'companyName',value:companyName});","utils.checkItemProperty({id:testId,property:'email', value:email});","utils.checkItemProperty({id:testId, property:'telephone', value:telephone});","utils.checkItemProperty({id:testId,property:'streetAddress',value:streetAddress});","utils.checkItemProperty({id:testId,property:'city',value:city});","utils.checkItemProperty({id:testId,property:'country',value:country});","utils.checkItemProperty({id:testId,property:'postalCode',value:postalCode});","utils.checkItemProperty({id:testId,property:'status',value:'active'});","","// EOF"],"type":"text/javascript"}},{"listen":"prerequest","script":{"id":"0bf85a62-3593-4514-bab9-ca0015971f4e","exec":[""],"type":"text/javascript"}}],"_postman_id":"24ba4b19-aa95-4e89-bcdd-3dc4dc8e3932","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"PUT","header":[{"key":"Accept","type":"text","value":"application/forms+json"},{"key":"Content-Type","name":"Content-Type","type":"text","value":"application/x-www-form-urlencoded"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"streetAddress","type":"text","value":"{{streetAddress}}"},{"key":"city","type":"text","value":"{{city}}"},{"key":"stateProvince","type":"text","value":"{{stateProvince}}"},{"key":"country","type":"text","value":"{{country}}"},{"key":"postalCode","type":"text","value":"{{postalCode}}"}]},"url":{"raw":"{{server}}/{{testId}}","host":["{{server}}"],"path":["{{testId}}"]}},"response":[]},{"name":"Company Status","event":[{"listen":"test","script":{"id":"aa707d9f-93f6-437a-8715-45e6dec84ea3","exec":["/***********************"," * FORMS+JSON TESTS"," ***********************/","","// shared vars for this script ","var body = pm.response.json();","var utils = eval(globals.loadUtils);","utils.setObject({object:'company'});","","// 200 OK","utils.checkStatus(200);","","// HEADERS","utils.checkHeader({name:'content-type',value:'application/forms+json'});","","// METADATA","utils.checkMetaProperty({name:'title', value:'BigCo Company Records'});","utils.checkMetaProperty({name:'release', value:'1.0.0'});","utils.checkMetaProperty({name:'author', value:'Amundsen'});","","// LINKS","utils.checkPageLink({name:'home', has:['id','href','rel']});","utils.checkPageLink({name:'self', has:['id','href','rel']});","utils.checkPageLink({name:'list', has:['id','href','rel']});","utils.checkPageLink({name:'filter', has:['id','href','rel']});","","// ITEMS","utils.checkItem({has:['id','companyName','status','email','dateCreated','dateUpdated','links']});","utils.checkItemLink({name:'read', has:['id','href','rel']});","utils.checkItemLink({name:'update', has:['id','href','rel','method','properties']});","utils.checkItemLink({name:'status', has:['id','href','rel','method','properties']});","utils.checkItemLink({name:'remove', has:['id','href','rel','method','properties']});","","var testId = pm.environment.get('testId');","var telephone = pm.environment.get('telephone');","utils.checkItemProperty({id:testId, property:'telephone',value:telephone});","","// EOF",""],"type":"text/javascript"}},{"listen":"prerequest","script":{"id":"0bf85a62-3593-4514-bab9-ca0015971f4e","exec":[""],"type":"text/javascript"}}],"_postman_id":"829bcdf1-5f0f-40be-8278-fca54a15d2c1","protocolProfileBehavior":{"disableBodyPruning":true},"request":{"method":"PATCH","header":[{"key":"Accept","type":"text","value":"application/forms+json"},{"key":"Content-Type","name":"Content-Type","type":"text","value":"application/x-www-form-urlencoded"}],"body":{"mode":"urlencoded","urlencoded":[{"key":"status","type":"text","value":"active"}]},"url":{"raw":"{{server}}/status/{{testId}}","host":["{{server}}"],"path":["status","{{testId}}"]}},"response":[]}],"event":[{"listen":"prerequest","script":{"id":"9443ed2a-61b6-4296-83ce-8ed9da03649f","type":"text/javascript","exec":["// SHARED FUNCTIONS (xxx)","// Utilities available for all tests in this collection","pm.globals.set('loadUtils', function loadUtils() {","    let utils = {};","    let obj = '';","    ","    // set shared object","    utils.setObject = function(args) {","        obj = args.object||'';","    };","    ","    // check status","    utils.checkStatus = function(value) {","        pm.test('Status is ' + value, function() {","           pm.expect(pm.response.code).to.equal(value); ","        });","    };","","    // check header","    utils.checkHeader = function(args) {","        pm.test('Header ' + args.name + ' contains ' + args.value, function() {","            var hdr = pm.response.headers.get(args.name);","            pm.expect(hdr).to.include(args.value);","        });","    };","","    // check metadata","    utils.checkMetaProperty = function(args) {","        pm.test('Meta property ' + args.name + ' contains ' + args.value, function() {","           var meta = body[obj].metadata.find( x => x.name === args.name);","           pm.expect(meta.value).to.include(args.value);","        });","    };","","    // check page link","    utils.checkPageLink = function(args) {","        pm.test('Valid ' + args.name + ' page link', function() {","            var link = body[obj].links.find(x => x.name === args.name);","            var coll = args.has||[];","            coll.forEach(function(p) {","                pm.expect(link).to.have.property(p);","            });","        });","    };","","    utils.checkPageLinkProperty = function(args) {","        pm.test('Page link ' + args.name + ' has a property ' + args.property + ' set to ' + args.value, function() {","            var link = body[obj].links.find(x => x.name === args.name);","            pm.expect(link).to.have.property(args.property);","            pm.expect(link[args.property]).to.include(args.value);            ","        });","    };","    ","    // check item","    utils.checkItem = function(args) {","        pm.test('Valid items', function() {","            var coll = body[obj].items;","            coll.forEach(function(item) {","                var props = args.has||[];","                props.forEach(function(p) {","                   pm.expect(item).to.have.property(p); ","                });","            });","        });","    };","","    // check item link","    utils.checkItemLink = function(args) {","        pm.test('Valid ' + args.name + ' item link', function() {","            coll = body[obj].items;","            coll.forEach(function(item) {","                var link = item.links.find(x => x.name === args.name);","                var props = args.has||[];","                props.forEach(function(p) {","                    pm.expect(link).to.have.property(p);","                });","            });","        });","    };","","    utils.checkItemLinkProperty = function(args) {","        pm.test('Link ' + args.name + ' for Item ' + args.id + ' has a property ' + args.property + ' set to ' + args.value, function() {","            var coll = body[obj].items;","            item = coll.find (x => x.id = args.id);","            link = item.links.find(x => x.name = args.name);","            pm.expect(link).to.have.property(args.property);","            pm.expect(link[args.property]).to.include(args.value);","        });    ","    };","        ","    utils.checkItemProperty = function(args) {","        pm.test('Item ' + args.id + ' has a property ' + args.property + ' set to ' + args.value, function() {","            coll - body[obj].items;","            item = coll.find (x => x.id = args.id);","            pm.expect(item).to.have.property(args.property);","            pm.expect(item[args.property]).to.include(args.value);","        });    ","    };","    ","    return utils;","    ","} + '; loadUtils();');"]}},{"listen":"test","script":{"id":"803a0111-dbe8-4ddf-8950-0565eae7f9f8","type":"text/javascript","exec":[""]}}]}}